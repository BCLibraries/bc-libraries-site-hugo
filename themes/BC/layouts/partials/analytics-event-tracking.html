<script>
$(function () {
    var $all_anchors = $('a');

    //
    // Megamenu hover events
    //

    $('#megamenu-refresh ul.nav li.dropdown').mouseenter(function() {
        var myText = $(this).find("a.menu-option").text();
        gtag('event', 'hover', {'event_category': 'megamenu', 'event_label': myText.trim()});
        _paq.push(['trackEvent', 'megamenu', 'hover', myText.trim()]);
    });

    $("ul.item-desktop li a").mouseenter(function(){
        var myPane = $(this).html();
        gtag('event', 'hover', {'event_category': 'librarypanes', 'event_label': myPane});
        _paq.push(['trackEvent', 'librarypanes', 'hover', myPane]);
    });

    //
    // Ask Us click event
    //

    $("a.askuswidget").click(function(e){
        var src = window.location.href;
        gtag('event', 'click', {'event_category': 'chat-widget', 'event_label': src});
        _paq.push(['trackEvent', 'chat-widget', 'click', src]);
    });

    //
    // Homepage click events
    //

    // send 'outbound' event for all link clicks
    $all_anchors.not('.askuswidget, .search-link, .accessibility-text').click(function(e) {
        var url = $(this).attr("href");
        /* Bug fix to stop screen jump when clicking carousel controls */
        if (url.indexOf('#') !== 0) {
            gtag('event', 'click', {'event_category': 'outbound', 'event_label': url});
            _paq.push(['trackEvent', 'outbound', 'click', url]);
        }
    });

    // send 'homepage' event for all link clicks and include sections
    // ignore news carousel and mega menu top-level links
    $all_anchors.not(".askuswidget, .carousel-control, li.dropdown > a.menu-option, .accessibility-text").click(function(e){
        var url = $(this).attr("href");                
        var dataTag = $(this).parents("[data-tag=ga-tag]");
        var dataID = "-";
        if (dataTag && dataTag.length) {
            dataID = dataTag.attr("id");
            if (typeof dataID === 'undefined') {
                dataID = "[undefined]"
            }
        }
        gtag('event', dataID, {'event_category': 'homepage', 'event_label': url});
        gtag('event', 'click', {'event_category': 'homepage', 'event_label': url, 'homepage_section': dataID});
        _paq.push(['trackEvent', 'homepage', dataID, url]);
    });
});
</script>