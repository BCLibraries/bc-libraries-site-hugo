<div class="col-md-12 col-xs-12 ql" id="staff-interest" data-tag="ga-tag">
    
    <h2>Scenes from the Library</h2>

    <div class="">
        <div class="blockquote">
            <div class="quote">Hope is being able to see that there is light despite all of the darkness.</div>
            <div class="quoted">- Desmond Tutu</div>
        </div>
    </div>

    <div class="photo_list"></div>

    <!-- https://stackoverflow.com/a/18674066 -->
    <script type="text/template" data-template="listitem">
        <div class="panel panel-default">
            <div class="panel-body">
                <img src="${image_url}" alt="${alt_text}" />
            </div>
            <div class="panel-footer">${caption}</div>
        </div>
    </script>

    <script>
        function shuffleArray(array) {
            for (var i = array.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = array[i];
                array[i] = array[j];
                array[j] = temp;
            }

            return array;
        }

        function render(props) {
            return function(tok, i) {
                return (i % 2) ? props[tok] : tok;
            };
        }

        // Load in library staff photos from hugo data
        // TODO make sure this loads as expected
        var library_staff_photos = [
            {{ $.Site.Data.homepage.scenes.librarystaffphotos }}
        ];

        var library_staff_photos_array = library_staff_photos[0].photos

        // Generate the randomize array
        var randomized_photos = shuffleArray(library_staff_photos_array);

        // Get first 4 images from randomized array
        var photos_set = randomized_photos.slice(0,4);

        // Load in template file
        var itemTpl = $('script[data-template="listitem"]').text().split(/\$\{(.+?)\}/g);

        // Loop through randomized_photos array and render each photo item with template
        $('.photo_list').append(photos_set.map(function(photo) {
            return itemTpl.map(render(photo)).join('');
        }));
    </script>

</div>